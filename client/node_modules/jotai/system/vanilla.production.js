System.register([],function(D){"use strict";return{execute:function(){D("atom",N);let L=0;function N(t,s){const l=`atom${++L}`,d={toString(){return l}};return typeof t=="function"?d.read=t:(d.init=t,d.read=Q,d.write=R),s&&(d.write=s),d}function Q(t){return t(this)}function R(t,s,l){return s(this,typeof l=="function"?l(t(this)):l)}const C=(t,s)=>t.unstable_is?t.unstable_is(s):s===t,T=t=>"init"in t,q=t=>!!t.write,E=Symbol(""),O="pending",U="fulfilled",$="rejected",x=t=>typeof t=="object"&&t!==null&&E in t,V=new WeakMap,X=(t,s,l)=>{if(!V.has(t)){let d;const w=new Promise((y,g)=>{let k=t;const b=h=>o=>{k===h&&(w.status=U,w.value=o,y(o),l())},M=h=>o=>{k===h&&(w.status=$,w.reason=o,g(o),l())};t.then(b(t),M(t)),d=(h,o)=>{h&&(V.set(h,w),k=h,h.then(b(h),M(h)),s(),s=o)}});w.status=O,w[E]=d,V.set(t,w)}return V.get(t)},Y=t=>typeof(t==null?void 0:t.then)=="function",B=t=>"v"in t||"e"in t,_=t=>{if("e"in t)throw t.e;return t.v},z=t=>{const s=t.v;return x(s)&&s.status===O?s:null},F=(t,s,l)=>{l.p.has(t)||(l.p.add(t),s.then(()=>{l.p.delete(t)},()=>{l.p.delete(t)}))},G=(t,s,l,d,w)=>{var y;l.d.set(d,w.n);const g=z(l);g&&F(s,g,w),(y=w.m)==null||y.t.add(s),t&&Z(t,d,s)},j=()=>[new Map,new Map,new Set],H=(t,s,l)=>{t[0].has(s)||t[0].set(s,new Set),t[1].set(s,l)},Z=(t,s,l)=>{const d=t[0].get(s);d&&d.add(l)},A=(t,s)=>t[0].get(s),I=(t,s)=>{t[2].add(s)},p=t=>{for(;t[1].size||t[2].size;){t[0].clear();const s=new Set(t[1].values());t[1].clear();const l=new Set(t[2]);t[2].clear(),s.forEach(d=>{var w;return(w=d.m)==null?void 0:w.l.forEach(y=>y())}),l.forEach(d=>d())}},J=t=>{const s=(o,r,e,n=()=>{},u=()=>{})=>{const f="v"in r,i=r.v,v=z(r);if(Y(e))if(v)v!==e&&(v[E](e,n),++r.n);else{const a=X(e,n,u);if(a.status===O)for(const c of r.d.keys())F(o,a,t(c,r));r.v=a,delete r.e}else v&&v[E](Promise.resolve(e),n),r.v=e,delete r.e;(!f||!Object.is(i,r.v))&&++r.n},l=(o,r,e,n)=>{if(!(n!=null&&n(r))&&B(e)&&(e.m||Array.from(e.d).every(([c,m])=>l(o,c,t(c,e),n).n===m)))return e;e.d.clear();let u=!0;const f=c=>{if(C(r,c)){const S=t(c,e);if(!B(S))if(T(c))s(c,S,c.init);else throw new Error("no atom init");return _(S)}const m=l(o,c,t(c,e),n);if(u)G(o,r,e,c,m);else{const S=j();G(S,r,e,c,m),b(S,r,e),p(S)}return _(m)};let i,v;const a={get signal(){return i||(i=new AbortController),i.signal},get setSelf(){return!v&&q(r)&&(v=(...c)=>{if(!u)return k(r,...c)}),v}};try{const c=r.read(f,a);return s(r,e,c,()=>i==null?void 0:i.abort(),()=>{if(e.m){const m=j();b(m,r,e),p(m)}}),e}catch(c){return delete e.v,e.e=c,++e.n,e}finally{u=!1}},d=o=>_(l(void 0,o,t(o))),w=(o,r,e)=>{var n,u;const f=new Map;for(const i of((n=e.m)==null?void 0:n.t)||[])f.set(i,t(i,e));for(const i of e.p)f.set(i,t(i,e));return(u=A(o,r))==null||u.forEach(i=>{f.set(i,t(i,e))}),f},y=(o,r,e)=>{const n=[],u=new Set,f=(a,c)=>{if(!u.has(a)){u.add(a);for(const[m,S]of w(o,a,c))a!==m&&f(m,S);n.push([a,c,c.n])}};f(r,e);const i=new Set([r]),v=a=>u.has(a);for(let a=n.length-1;a>=0;--a){const[c,m,S]=n[a];let P=!1;for(const K of m.d.keys())if(K!==c&&i.has(K)){P=!0;break}P&&(l(o,c,m,v),b(o,c,m),S!==m.n&&(H(o,c,m),i.add(c))),u.delete(c)}},g=(o,r,e,...n)=>{const u=i=>_(l(o,i,t(i,e))),f=(i,...v)=>{const a=t(i,e);let c;if(C(r,i)){if(!T(i))throw new Error("atom not writable");const m="v"in a,S=a.v,P=v[0];s(i,a,P),b(o,i,a),(!m||!Object.is(S,a.v))&&(H(o,i,a),y(o,i,a))}else c=g(o,i,a,...v);return p(o),c};return r.write(u,f,...n)},k=(o,...r)=>{const e=j(),n=g(e,o,t(o),...r);return p(e),n},b=(o,r,e)=>{if(e.m&&!z(e)){for(const n of e.d.keys())e.m.d.has(n)||(M(o,n,t(n,e)).t.add(r),e.m.d.add(n));for(const n of e.m.d||[])if(!e.d.has(n)){e.m.d.delete(n);const u=h(o,n,t(n,e));u==null||u.t.delete(r)}}},M=(o,r,e)=>{if(!e.m){l(o,r,e);for(const n of e.d.keys())M(o,n,t(n,e)).t.add(r);if(e.m={l:new Set,d:new Set(e.d.keys()),t:new Set},q(r)&&r.onMount){const n=e.m,{onMount:u}=r;I(o,()=>{const f=u((...i)=>g(o,r,e,...i));f&&(n.u=f)})}}return e.m},h=(o,r,e)=>{if(e.m&&!e.m.l.size&&!Array.from(e.m.t).some(n=>{var u;return(u=t(n,e).m)==null?void 0:u.d.has(r)})){const n=e.m.u;n&&I(o,n),delete e.m;for(const f of e.d.keys()){const i=h(o,f,t(f,e));i==null||i.t.delete(r)}const u=z(e);u&&u[E](void 0,()=>{});return}return e.m};return{get:d,set:k,sub:(o,r)=>{const e=j(),n=t(o),u=M(e,o,n);p(e);const f=u.l;return f.add(r),()=>{f.delete(r);const i=j();h(i,o,n),p(i)}},unstable_derive:o=>J(...o(t))}},tt=D("createStore",()=>{const t=new WeakMap;return J(s=>{let l=t.get(s);return l||(l={d:new Map,p:new Set,n:0},t.set(s,l)),l})});let W;const et=D("getDefaultStore",()=>(W||(W=tt()),W))}}});
